
\section{Introduction}

%cahnnel from roth economist as enginerr
%Since then, economists have gained significant experience in practical market
%design. One thing we learned from this experience is that transactions and institutions %matter at a level of detail that economists have not often had to deal with,
%and, in this respect, all markets are different. But there are also general lessons.
%This essay will consider some ways in which markets succeed and fail by looking at
%some common patterns we see of market failures, and how they have been fixed."
%3. Make it safe to participate in the market as simply as possible, as opposed to
%transacting outside of the marketplace, or engaging in strategic behavior that	 reduces
%overall welfare.


This chapter considers a subject facing a decision, who wishes to incentivize multiple experts in providing advice so as to pick a decision that maximizes the rewards the subject receives, while maintaining the freedom of the subject.
Experts do not have intrinsic interest in the action the subject chooses or actually takes, nor do they face any costs in acquiring their signals.

Preserving subjects freedom is a inherently desirable practical design criterion as it enables no-regret exploration on the part of the subjects. Subject remains at all point in control of the decision, and so trying the mechanism cannot reduce their choices or their expected welfare.\footnote{One can set a reserve price of the advice auction to the expected value of the action the agent would have picked if they did not participate in the mechanism. As long as the reserve price is set apriori or alternative reports form the non-winning bidders are the only thing used to set it, the incentives do not change from those analized here.}.



The main contribution of this chapter is casting this setting as one of a single unit efficient allocation with interdependent valuations (\cite{milgrom1982theory,maskin1992auctions,ausubel1999generalized,mclean2004informational,roughgarden2016optimal,eden2018interdependent}).
This allows us to leverage existing results in that setting, which provide both necessary conditions for efficient allocations (single crossing conditions on the signal structure) and impossibility results when those are not met.

% Each bidder reports her type to the auctioneer. Given the reports, the auctioneer determines the allocation that maximizes surplus.
%The payment rule is the following extension of Vickrey auction pricing: a bidder is charged for a given unit that she wins according to valuations evaluated at the minimum signal that she could have reported and still won that unit.



The key conceptual contribution that allows this is to consider the allocation not over the decisions, but instead over the experts providing the advice. 
The item to be allocated is the right to observe the signal reports, provide the advice and a (linear) share of the reward obtained by the subject.
We term these mechanisms \emph{advice auctions}.
The term advice is chosen to highlight that the decision is not ultimately determined by the market, thus preserving the subject's freedom.
The term auction highlights that this procedure does not produce a sequence of prices through time.
It is this simultaneous nature that allows us to side-step the negative (from the perspective of freedom) results that constrain sequential mechanisms to having full support over actions in order to provide  incentives.

Sharing rewards after choosing what decision to advice is neither a pure private value (since the optimal choice conditional on information makes the value the same for everyone) nor pure common value (since the ability the select the optimal choice given access to the other signals might vary across agents).
A advantage of this framing as opposed to having a mechanism that directly outputs a chosen action is that it allows for the expert making the recommendation to have different influences on subject (i.e. some experts may be more persuasive).
If the mechanism output was a choice to advice the subject directly, we would have to restrict the expected reward the subject receives not to depend on which expert submitted which report, this can be seen as  a limit on subject freedom (since it it is an external constraint).
By having the mechanism select the expert instead of the choice,it also becomes natural to extend to the more practical setting that does not require the mechanism to have access to the valuation functions, but instead rely on the highest bidder to be able to aggregate reported signals effectively.

%This closely follows work on efficiency allocation with interdependent values , and our mechanism has the same two steps: first agents submit their signals so as to be able to determine the probabilities over states of the world, and the results of that are used to pick an efficient allocation in what is private .  


\subsection{Limits to Subject Freedom in Sequential Proper Scoring Rule Based Decision Markets}

One way to incentivize them is by applying the machinery of prediction markets based on sequentially shared proper scoring rules to the expected reward conditional on the action.
A challenge that presents itself is how to settle the markets for the reward conditional on the action which is not taken.
One natural approach is to void the trades in the markets for these actions, this being the originally proposed mechanism in this line of work \cite{hanson2002decision}, and only settling the markets where actions are taken.
While seemingly natural, this is not incentive compatible for the experts, even in the weak myopic sense, as shown in \cite{othman2010decision}. 

To understand why this is the case, consider a last trader facing the prediction market (sequential proper scoring rule)  where the  price is correct (matches the expected reward) for the optimal action but there is some other action that is misprinted. The profit maximizing move for this trader is to lower the price of the optimal action below the true price of the previously misprinted action, and correct the mispriced action to its true  price. 
The utility maximizing subject would then carry out the suboptimal action, the expert would be rewarded for correctly predicting it and would receive no punishment for the error they introduced into the reward of the optimal action. 
%A mechanism is called Bayes Nash Incentive Compatible (BNIC) if there is a equilibrium were every agent reports their signal truthfully and this maximizes their reward in expectation (over the state of the world).
The mechanism proposed in \cite{hanson2002decision} is not BNIC for the experts who provide advice, as witnessed by the example above (and shown in \cite{othman2010decision,chen2014eliciting}).
More generally, any sequential proper scoring rule based mechanism that is incentive compatible for the experts is incompatible with maintaining the subject's freedom to select the action that appears optimal ex-post (\cite{ chen2014eliciting}). 

%Interdependent Values without Single-Crossing
%Alon Eden, Michal Feldman, Amos Fiat, Kira Goldner
%We consider a setting where an auctioneer sells a single item to n potential agents with {\em interdependent values}. That is, each agent has her own private signal, and the valuation of each agent is a known function of all n private signals. This captures settings such as valuations for artwork, oil drilling rights, broadcast rights, and many more. 


%In the interdependent value setting, all previous work has assumed a so-called {\sl single-crossing condition}. Single-crossing means that the impact of agent i's private signal, si, on her own valuation is greater than the impact of si on the valuation of any other agent. It is known that without the single-crossing condition an efficient outcome cannot be obtained. We study welfare maximization for interdependent valuations through the lens of approximation. 


%\cite{eden2018interdependent}
%We show that, in general, without the single-crossing condition, one cannot hope to approximate the optimal social welfare any better than the approximation given by assigning the item to a random bidder. 
%Consequently, we introduce a relaxed version of single-crossing, {\sl c-single-crossing}, parameterized by câ‰¥1, which means that the impact of si on the valuation of agent i is at least 1/c times the impact of si on the valuation of any other agent (c=1 is single-crossing). Using this parameterized notion, we obtain a host of positive results. 


% The first step of our procedure maps to the setting of 
% https://www.sas.upenn.edu/~apostlew/paper/pdf/auctionrevised.pdf
%and more generally
% TE2015 



\subsection{Summary and Outline}

%TODO: garrett says more clear explanation. make explicit pointer to background section, and make paragraph of sentence.
%The core of the problem which emerges upon using the machinery of prediction markets in the decision setting is that

The rest of the chapter is structured as follows.
We first introduce a formal model and notation.
We then present advice auctions as a direct mechanism, show when they are truthful, as well as their limits.
We then consider two practical indirect variations of the procedure, which removes the need for the mechanism to have any knowledge of valuations, and consider sufficient conditions for their efficiency and truthfulness.  



\section{Model}



As before, the subject seeks advice on a decision they will take from some finite set of alternatives $A$, let $c$ be the choice that is given as advice to the subject and $a$ the decision that the subject actually takes.
The rest of our model and notation largely follow that of \cite{eden2018interdependent}.%\footnote{Relative to their notation and to maintain coherency with the other chapters in the thesis, in our setting the number of potential actions is $q$ instead of $k$, while  }.
Each expert $i \in \{1, \ldots, n\}$ receives a single signal $s_i$ which is known only to expert $i$.
Potential signals for bidder $1 \leq i\leq n$ form a discrete signal space $S_i$.
Let $\vec{s}=(s_1,s_2,\ldots,s_n)$ be a signal profile.
The reward $r$ that the subject receives depends on their chosen action $a$ and the underlying state of the world as determined by the signal profile $\vec{s}$.
Let $\vec{s}_{-i}$ denote all signals but $s_i$, and let $(s_i',\vec{s}_{-i})$ denote the profile $\vec{s}$ where $s_i$ has been replaced with $s'_i$. 
Since $r$ does not depend on the choice of $c$ by the expert, and that at the point the mechanism is run $a$ has not been selected, we use the following reduced form  value function for the value of the rights bundle to expert $i$: $v_i: \times_i \ S_i \rightarrow \mathbb{R}_{\geq 0}$, which maps every signal profile to the expected value of linear share of the reward  $\alpha r$.


Each expert reports a signal $b_i$, and the vector of reported signals is $\vec{b}=( b_1, b_2, \ldots, b_n)$.
Each possible signal profile $\vec{s}$ corresponds to an underlying state of the world, this includes both inherent physical properties of the subject and the actions, as well as the subjects probability of choice of $a$ in response to different choices of $c$.
%Without loss of generality, assume $S_i=\{0,1,\ldots,q_i\}$.


%This value is given by $\alpha r(\vec{s})$
The valuation functions for all bidders $i$ are monotone non-decreasing in every signal $s_j$ for all $j$.%\footnote{Both of these assumptions are without loss of generality; the space of potential signals can alwyas be , while the ordering of the signals is arbitrary, so they can always be sorted into monotone non-decreasing.}

Mechanisms are a pair $(x,p)$, where $x$ is a set of allocation functions $x=\{x_1(\vec{b}),\ldots,x_n(\vec{b})\}$ satisfying $\sum_i x_i(\vec{s}) \leq 1$ for all possible $\vec{b}$, and $p$ a set of payment functions  $p=\{p_1(\vec{b}),\ldots,p_n(\vec{b})\}$.
An allocation function $x_i:\times_j \ S_j\rightarrow [0,1]$ maps every bid profile $\vec{b}$ to the probability that expert $i$ gets allocated.
A payment rule $p_i: \times _j S_j \rightarrow \cR$ maps the reported signals $\vec{b}$ to the expected payment from bidder $i$. Experts are risk neutral, so their expected utility is quasilinear, given in the reduced form by $x_i (\vec{b}) \cdot v_i(\vec{s}) - p_i(\vec{b})$ where $\vec{s}$ is the true signal profile of the experts.


%One cannot hope for truth-telling to be a dominant strategy for the experts. One expert's misreport can cause other experts to also misreport to compensate. Thus the strongest incentive-compatibility (IC) notion that we can hope for is in this setting is truthfulness is an ex-post Nash Equilibrium. That is it is in every agent $i$'s best interest to report his true signal $s_i$ given that all other agents reported the true signal profile $\vec{s}_{-i}$:
$$x_i(\vec{s}) \cdot v_i(\vec{s}) - p_i(\vec{s}) \geq x_i(b_i, \vec{s}_{-i}) \cdot v_i(\vec{s}) - p_i(b_i, \vec{s}_{-i})  \quad \quad \quad  \forall \vec{s} \in \times _{j} \  S_j, b_i \in S_i. \quad\quad\quad [\text{IC}]$$




%As in \cite{mclean2004informational} an experts  information may be of two qualitatively different kinds: information about the objective characteristics of the subject and the effects of their alternative decisions and how generally persuasive they are to find the recommended action.
%Idiosyncratic information about the agent himself: their ability to aggregate the signals efficiently, and how persuasive the would result as the advisors who selected $c$ in the second stage of the game. 
%The former is of interest to other agentsâ€”and consequently is the cause of the interdependence of agentsâ€™ valuesâ€”while the latter is irrelevant to other agents in calculating their values.


\section{A Direct Reward Sharing Mechanism}

The simplest class of mechanisms to incentivize advice is based on sharing a fraction of the rewards with the experts. For the single expert case this is mentioned by \cite{othman2010decision}. Here the idea is extended to the multiple experts case. We do this by instantiating our notion of advice auctions with a simple mechanism,
the generalized VCG mechanism proposed by \cite{maskin1992auctions}. This mechanism is \emph{direct} in the standard sense that agents report their signals. 

The core of the mechanism is simple. Since there is knowledge by the mechanism over the value function for a given vector of signals, it can use the reported signals to select the highest value expert. The net payment to that expert is then just his share of the reward minus his value at the lowest signal he could have misreported and still obtained the allocation give the other reports. More formally:

\begin{mech}\label{mech:Direct}[Direct Reward Share VCG]
Then mechanism gives the rights bundle to the expert $i^*$ with the highest valuation under the reported signals. That is, the allocation rule is:

$$x(\vec{s}) = i \quad \quad\quad \text{when} \quad\quad\quad x_j(\vec{s}) = \begin{cases} 1 & \text{if } j=i \\ 0 & \text{otherwise.} \end{cases}$$

This lets the expert $i^*$ observe  $\vec{b}$ and then select $c$.
Then subject observes $c$ and $\vec{b}$, takes their action $a$ and receives reward $r$, which the mechanism observes. 

The non selected experts receive no payment, while the selected expert $i^*$ receives their share $\alpha$ of the reward $r$ minus the value of the share of the reward at the lowest $b_i'$ (the critical signal) that would have still resulted in expert $i$ being selected. 
More formally, given signals for agents $\neq i$, $\vec{s}_{-i}$, the {\sl critical signal} for $i$ is: if there exists some $b_i$ such that $x_i(s_{-i},b_i)=1$ then set $b_i^*=\min_{b_i} x_i(s_{-i},b_i)=1$, otherwise there is no critical signal for $i$.
Thus, the payment rule is:

$p_i= \alpha r - v_i(\vec{s}_{-i},b_i^*)$

\end{mech}

An allocation function $x_i$ is called {\sl deterministic} if $x_i(\vec{b})\in \{0,1\}$ for all $i$ and all $\vec{b}$.
The generalized direct VCG mechanism is deterministic and prior-free.

\subsection{Truthfulness with Single Crossing Signals}

\begin{defn}[Monotonicity]
	An allocation function $x_i$ is said to be monotone if for every $\vec{b}_{-i}$, $x_i(\vec{b}_{-i},b_i)$ is monotone non-decreasing in the signal $b_i$.
\end{defn}

Truthful mechanisms can be characterized as follows \cite{roughgarden2016optimal}.

\begin{prop}\label{prop:char-ic}
	Monotonicity is a necessary and sufficient condition for allocation functions $x$ to be \emph{implementable}, {\sl i.e.}, there exist payment functions $p$ such that the mechanism $(x,p)$ is truthful.  Moreover, an analogue of Myerson's payment identity holds, so the payment is uniquely determined by the allocation function.
\end{prop}

It follows that constructing a truthful mechanism is equivalent to constructing a monotone allocation function.
For deterministic truthful mechanisms, the payment identity of \citet{roughgarden2016optimal} implies the following about the cost charged to a chosen expert (from \cite{eden2018interdependent}).

\begin{prop}\label{prop:deterministic_payment}
	Let agent $i$ be the allocated winner at report profile $\vec{s}$ in a deterministic truthful mechanism. Then their cost is their value at the critical report.
\end{prop}


A single-crossing condition captures the idea that bidder $i$'s signal has a greater effect on experts $i$'s value than on any other experts's value. We follow the definition in \cite{eden2018interdependent}:

For $s_i = 1, \ldots, k_i$, define $\frac{\partial v_j(s_i, \vec{s}_{-i})}{\partial s_i} = v_j(s_i, \vec{s}_{-i}) - v_j(s_i - 1, \vec{s}_{-i})$.

\begin{defn}[Single-Crossing]
	A valuation profile is said to satisfy the single-crossing condition if for every expert $i$, for any set of other experts  signals $\vec{s}_{-i}$, and for every expert $j$, $$\frac{\partial v_i(s_i, \vec{s}_{-i})}{\partial s_i} \geq \frac{\partial v_j(s_i, \vec{s}_{-i})}{\partial s_i}.$$
\end{defn}


%We note that there also exists a weaker notion of single-crossing that only requires the inequality to hold at $\vec{s}$ for the bidder $i$ with the highest value, where $i \in \argmax_{k} v_k(\vec{s})$.

\begin{thm}
	There is a truthful and efficient ex-post Nash equilibrium of the DRSA mechanism when signals satisfy the single crossing property.
\end{thm}

\begin{proof}
Allocating to the bidder with the highest value is a monotone allocation rule, and therefore, according to Proposition~\ref{prop:char-ic} it is implementable. The cost for the rights bundle of the chosen expert is then just their value at their critical signal, which is the corresponding payment.
\end{proof}

Further, one cannot do better than this as per Proposition~\ref{prop:char-ic}, monotonicity of the allocation rule is necessary for a efficient and truthful mechanism with interdepedent values. Hence, without single-crossing, it is impossible to have a truthful advice auction in general.

This procedure for a direct advice elicitation mechanism based on the advice auction procedure was here instantiated using \cite{maskin1992auctions}  as the underlying auction mechanism. But the procedure is generic. It could be, for example, instantiated instead with the randomized mechanism of \cite{eden2018interdependent}, and would obtain the approximation properties that algorithm provides in auctions in our advice setting.


\section{Practical mechanisms: Advice Auctions}

The assumptions used in \cite{roughgarden2016optimal} that are used for the above result are extremely minimal relative to the existing literature in most of decision markets and auctions with interdependent values.

However, the mechanism having access to the value functions seems highly impractical in most potential applications.
Given the practical settings that motivate this work, 
we do not assume access by the mechanism to a the valuation functions, and consider two practical alternatives.


\subsection{A Bid and Signal Reward Sharing Mechanism}

The first modification one can do to make the payment of the highest bidder depend on the bid of the second highest, this removes the dependency of the payments function on the 
valuation functions of experts.
The challenge this faces is that the signals reports being submitted would not matter, so any signal report is in equilibrium. To correct this and restore strict incentives, we can add a further payment received by all experts that is also a linear share of the reward (denoted by $\beta$). This makes the truthful signaling equilibrium potentially strict.


\begin{mech}\label{mech:Direct}[Allocation with Bids, Reward Share with Signals (ABRSS)]
	Experts report both a bid and a signal, we slightly abuse notation and use $vec(s)$ to denote the reported signals, note their only use is to be displayed to the expert allocated to make the choice..
	Then the mechanism gives the rights bundle to the expert $i^*$ with the highest bid:
	
	$$x(\vec{b}) = i \quad \quad\quad \text{when} \quad\quad\quad x_j(\vec{b}) = \begin{cases} 1 & \text{if } j=i \\ 0 & \text{otherwise.} \end{cases}$$
	
	This lets the expert $i^*$ observe reported signals $\vec{s}$ and select $c$.
	Then subject observes $c$ and $\vec{b}$ and $\vec{s}$, takes their action $a$ and receives reward $r$, which the mechanism observes. 
	
	The non selected experts receive  payment $\beta r$, while the selected expert $i^*$ receives their shares $(\alpha + \beta) r$ of the reward minus the second highest bid, $b_{i^*-1}$.

	Thus, the payment rule is:
	
	$p_i^*= ((\alpha + \beta)r - b_{i^*-1})$ and $p_{j\neq i^*} = \beta r$
\end{mech}



For this allocation rule to reach efficient allocation achieved by the direct mechanism, a stronger assumption on signal structure is needed. If we only require single crossing then the identity of the highest valuation expert can depend on interaction of their signals and those of other experts. Without access to the value function the mechanism cannot in general hope to achieve this allocation.
Thus beyond single crossing, we also require that the highest valuation expert must be so for any possible set of signals other than their own. In this case the allocation of this mechanism is efficient, since it coincides with the direct mechanisms allocation.

%MORE FORMALY

\begin{defn}[Single Signal Max Value]
	A valuation profile is said to satisfy the single-signal max value condition if highest value expert $i^*$ knows he is the highest value when given their signal, and for any set of other experts  signals $\vec{s}_{-i}$, and for every expert $j$: $$v_i(s_i, \vec{s}_{-i}) \geq  v_j(s_i, \vec{s}_{-i})$$
\end{defn}


Note this property is not as strong as it may at first seem. If there is an expert who has the trust of the subject, understands what they find persuasive, and is sufficiently competent at evaluating the reported signals of others, it may be best able to select $c$ to maximize $r$ no matter the state of the world. Being able to see other experts' signals may however substantially raise the reward and hence the value of the highest valued expert.  


\begin{thm}
	There is a truthful and efficient ex-post Nash equilibrium of the ABRSS mechanism when signals satisfy the single signal max value property.
\end{thm}

\begin{proof}
	The highest value bidder bids his worst possible value given the other bids or anything higher (knowing he will win and be charged according to the second highest price makes him indifferent between these when others are truthful).
	Allocating to the bidder with the highest value is a monotone allocation rule, and therefore, according to Proposition~\ref{prop:char-ic} it is implementable. The cost for the rights bundle of the chosen expert is then the second highest bid, which is the corresponding payment.
\end{proof}



For contrast consider the identical mechanism but without the experts submitting their signals and receiving share $\beta$. 
 
\begin{mech}\label{mech:BidOnly}[Bid Only Advice Auction]
 	Each expert observes their signal and then report only a bid $b_i$. The mechanism gives the rights bundle to the expert $i^*$ with the highest bid:
 	
 	$$x(\vec{b}) = i \quad \quad\quad \text{when} \quad\quad\quad x_j(\vec{b}) = \begin{cases} 1 & \text{if } j=i \\ 0 & \text{otherwise.} \end{cases}$$
 	
 	This lets the expert $i^*$ observe reported bids $\vec{b}$ and then select $c$.
 	Then the subject observes $c$ and $\vec{b}$, takes their action $a$ and receives reward $r$, which the mechanism observes. 
 	
 	The non-selected experts receive  payment $\beta r$, while the selected expert $i^*$ receives their shares $(\alpha + \beta) r$ of the reward minus the second highest bid, $b_{i^*-1}$.
 	
 	Thus, the payment rule is:
 	
 	$p_i^*= ((\alpha + \beta)r - b_{i^*-1})$ and $p_{j\neq i^*} = \beta r$
 \end{mech}
 
 For some very limited information structures the bidding mechanism still aggregates information efficiently. 
 These information structures correspond to the standard private values settings in which the Vickrey auction is efficient \cite{vickrey1961}.
 Private values occur when other experts signals are not informative of the value for an expert of being assigned the rights bundle to make the choice.
 For example, when each expert signal is only informative about the expected outcome conditional on one action, and  there is one expert who is informed about each action.
 
 
 This kind of indirect mechanism is inherently limited when the value from the signals of experts are interrelated (as we proved before). Their bid, cannot encode the full information contained in the signals, and thus this limits any mechanism that relies solely on single rounds of bids to aggregate information.
 
 To illustrate this consider a setting that satisfies the single max bidder assumption. Denote by $i^*$ the experts whose valuation is higher than all other experts in every state of the world and who knows the subject trust them completely so if he wins $c=a$. Have a second expert whose value is $0$ in all state of the world\footnote{For example the expert might know the subject is biased and refuses to hear the expert due to color of their skin.} but has a binary independent signal $s_{treat}$ that determines which choice is best for the subject, without knowing $s_{treat}$ the two best choices have equal expected reward $r_{uniform}$, while knowing the value of the signal allows to select the appropriate choice and results in double the reward $2r_{uniform}$.
 Since their value for the rights bundle is always 0, thus their bid is in equilibrium. 
 There is no prior-free way for the unpersuasive expert to encode his signal into their bid (even through he is incentivize to reveal their signal to get a higher $\beta$ payment). 
 Notice that there is no limit in the size of the gap in the rewards between the two allocations in general, as in the example above we can replace $2$ by any number.
 
 

\section{Conclusion}

This chapter shows how to use the bundle of rights perspective on advisers to recast the incentivizes for decision elicitation from multiple experts into the thriving literature on VCG with interdependent valuations.
We then use a result of \cite{roughgarden2016optimal} for the generalized VCG mechanism of \cite{maskin1992auctions} to allocate the rights results in a direct incentive compatible and efficient mechanism when signals have a single crossing property.
We then explore two practical variations of the mechanism that relax the assumption that the mechanism can access the value functions of experts, and that signals can be transmitted between experts. We give sufficient conditions on the structure of the signals so that the variations of the mechanisms preserve truthfulness and efficiency.
